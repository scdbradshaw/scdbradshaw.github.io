<html>
<head>
<title>KABANG!</title>
<script src="https://simplycodingcourses.com/files/simply.js"></script>
<script>


var playerData = localStorage.getItem("playerProperties");

if(playerData){
   playerData = JSON.parse(playerData);
} else {
   playerData = {
   		
   }
}



var mapX = 0;
var mapY = 0;
var pixels = screen.width / 14;



var playerProperties = {
	x : 6 * pixels,
	y : 5 * pixels,
	lastX : 0,
	lastY : 0,
	push: 2,

	defeatGEnemy : false,
	lastLocation : "house",

	gold : 0,
	gaveGun : false,

	lives : 5,
	gun : "firstGun",
	maxAmmo : 2,
	damage : 1,
	hit : "greenEnemy",

	gotHorse : false,
	onHorse : false,
	offHorse : true,


	greenEnemyAmountR1 : 4,
	greenEnemyAmountR3 : 4,
	yellowEnemyAmountR2 : 4,
	yellowEnemyAmountR4 : 5,
	redEnemyAmountR4 : 5,
	gEAmountR0D1 : 2,
	yEAmountR0D1 : 2,


}


if(playerData.defeatGEnemy == undefined || playerData.defeatGEnemy == false){
	playerData.gun = "firstGun";
	playerData.maxAmmo = 2;
	playerData.damage = 1;
	playerData.push = 2;
	
}

function start(){
	sjs.open("target", screen.width - 50, screen.height - 125 );

	var mapGrid = [
		[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,], 
		[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,],
		[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,],
		[1,0,0,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,1,],
		[1,0,0,2,3,3,3,3,3,3,3,3,3,3,2,0,0,0,0,1,],
		[1,0,0,2,3,4,3,3,3,3,3,3,3,3,2,0,0,0,0,1,],
		[1,0,0,2,3,3,3,3,3,3,3,3,3,3,2,0,0,0,0,0,],
		[1,0,0,2,3,5,3,3,3,3,3,3,3,3,2,0,0,0,0,0,],
		[1,0,0,2,3,3,3,3,3,3,3,3,3,3,2,0,0,0,0,1,],
		[1,0,0,2,2,2,2,2,2,2,2,3,3,2,2,1,0,1,1,1,],
		[1,0,0,0,0,0,0,0,0,0,6,0,0,6,0,0,0,0,0,1,],
		[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,],
		[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,],
		[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,],
		[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,], 
	];//end of mapGrid array

	

	for(var i = 0; i < mapGrid.length; i++){
		for(var j = 0; j < mapGrid[i].length; j++){
			if(mapGrid[i][j] == 0){
				var dirt = new sjs.Image("Images/dirt.png");
				dirt.type = "dirt"
				dirt.setSize(pixels, pixels)
				dirt.moveTo(mapX, mapY)
			
			}//end of setting 0 in grid to dirt

			if(mapGrid[i][j] == 1){
				var fence = new sjs.Image("Images/fence.png");
				fence.type = "fence"
				fence.setSize(pixels, pixels);
				fence.moveTo(mapX, mapY)
			}//end of setting 1 in grid to outside fence

			if(mapGrid[i][j] == 2){
				var wall = new sjs.Image("Images/wall.png");
				wall.type = "wall";
				wall.setSize(pixels, pixels);
				wall.moveTo(mapX, mapY);
			}//end of setting 2 in grid to walls

			if(mapGrid[i][j] == 3){
				var houseFloor = new sjs.Image("Images/houseFloor.png");
				houseFloor.type = "floor";
				houseFloor.setSize(pixels, pixels);
				houseFloor.moveTo(mapX, mapY);
			}//end of setting 3 in grid to house floor

			if(mapGrid[i][j] == 4){
				var bed = new sjs.Image("Images/bed.png");
				bed.type = "bed";
				bed.setSize(pixels, pixels);
				bed.moveTo(mapX, mapY);
			}//end of setting 4 in grid to bed

			if(mapGrid[i][j] == 5){
				var table = new sjs.Image("Images/table.png");
				table.type = "table";
				table.setSize(pixels, pixels);
				table.moveTo(mapX, mapY);
			}//end of setting 5 in grid to table

			if(mapGrid[i][j] == 6){
				var rock = new sjs.Image("Images/rock.png");
				rock.type = "rock";
				rock.setSize(pixels, pixels);
				rock.moveTo(mapX, mapY);
			}//end of setting 6 in grid to be rocks

			if(mapGrid[i][j] == 7){
				
			}


			mapX += pixels;
		}//end of for loop for y grid

		mapX = 0;
		mapY += pixels;
	}//end of for loop for x grid

	
	var background = new sjs.Image("")
	background.type = "background";
	background.setSize(pixels * 20, pixels * 15);




	//*** PLAYER START ***
	var facingRight = true;
	var facingUp = true;
	var playerFriction = 0.5;

	var player = new sjs.Image("Images/faceLeftNoGun.png");
	player.type = "player";
	player.setSize(pixels / 32 * 17, pixels);
	player.moveTo(6 * pixels, 5 * pixels);
	player.friction = playerFriction;
	player.noBounds = true;
	player.node.style.zIndex = 3;



	sjs.scrollable(player, background);


	if(playerData.defeatGEnemy == undefined){
		playerData.lives = 5;
	}//end of if defeatedGEnemy is undefined then lives exist
	
	var healthBar = new sjs.Image("Images/healthBar.png");
	healthBar.type = "healthBar";
	healthBar.setSize(playerData.lives * pixels / 4, pixels / 8)
	healthBar.follow(player);
	healthBar.moveTo(player.getX() - pixels / 4, player.getY() - pixels / 4);
	healthBar.node.style.zIndex = 1;
	healthBar.friction = playerFriction;


	if(playerData.defeatGEnemy == true){
		var goldIndicator = new sjs.Image("Images/gold.png");
		goldIndicator.setSize(40, 40);
		goldIndicator.moveTo(0, 5)
		goldIndicator.fixed = true;
		var goldText = new sjs.Text(playerData["gold"], 40, "yellow");
		goldText.moveTo(45, 0);
		goldText.fixed = true;


		var minimap = new sjs.Image("Images/minimap.png");
		minimap.moveTo(1120, 5)
		minimap.fixed = true;
		minimap.setSize(pixels * 1.25, pixels);

		var minimapPerson = new sjs.Image("Images/minimapPerson.png");
		minimapPerson.setSize(2, 2);
		minimapPerson.moveTo(1130, 13)
		minimapPerson.fixed = true;


		for(var i = 0; i < mapGrid.length; i += 1){
			for(var j = 0; j < mapGrid[i].length; j += 1){

			}//end of for j in mapgrid

		}//end of for i in mapgrid

	}//end of if defeated green enemy is true then display gold stuffs


	var rightImage = new sjs.Image("Images/faceRight1.png");
	rightImage.hide();

	var leftImage = new sjs.Image("Images/faceLeft1.png");
	leftImage.hide();

	var firstGun = new sjs.Image("Images/firstGunRight.png");
	firstGun.hide();
	firstGun.setSize(pixels / 3 , pixels / 3);
	firstGun.node.style.zIndex = 4;
	firstGun.friction = playerFriction;
	

	var longGun = new sjs.Image("Images/longGunRight.png");
	longGun.type = "longGun";
	longGun.setSize(pixels / 2, pixels / 2);
	longGun.friction = playerFriction;

	

	var shotgun = new sjs.Image("Images/shotgunRight.png");
	shotgun.type = "shotgun";
	shotgun.setSize(pixels * 3/4, pixels / 2);
	shotgun.friction = playerFriction;


	var winchester = new sjs.Image("Images/winchesterRight.png");
	winchester.type = "winchester";
	winchester.setSize(pixels, pixels / 2);
	winchester.friction = playerFriction;


	if(playerData.onHorse == true){
		var horse = new sjs.Image("Images/horseR.png");
		horse.setSize(pixels * 2, pixels * 2);
		horse.type = "horse";
		horse.follow(player);
		horse.moveTo(player.x - pixels / 2, player.y - pixels / 4);
	}//end of if youre on the horse

	
	sjs.keyDown(D_KEY, function(){
		

		if(playerData.gun == "longGun"){
			firstGun.hide();
			shotgun.hide();
			winchester.hide();
		} else if(playerData.gun == "shotgun"){
			firstGun.hide();
			longGun.hide();
			winchester.hide();
		} else if(playerData.gun == "winchester"){
			firstGun.hide();
			longGun.hide();
			shotgun.hide();
		}//end of hiding guns that aren't being used


			facingRight = true;
			player.pushRight(playerData.push);

			player.setImage("Images/faceRightNoGun.png");

			if(playerData.onHorse == true){
				horse.moveTo(player.x - pixels / 2, player.y - pixels / 4);
				horse.setImage("Images/horseR.png");

			}//end of if facing right is true
			
			if(playerData.gaveGun == true){
				if(playerData.gun == "firstGun"){
					firstGun.moveTo(player.x + pixels / 80 * 40, player.y + pixels / 80 * 25);
					firstGun.pushRight(playerData.push);
					firstGun.setImage("Images/firstGunRight.png");
				} else if(playerData.gun == "longGun"){
					firstGun.destroy();
					shotgun.destroy();

					longGun.moveTo(player.x + 50, player.y + 25);
					longGun.pushRight(playerData.push);
					longGun.setImage("Images/longGunRight.png")
				} else if(playerData.gun == "shotgun"){
					firstGun.destroy();
					longGun.destroy();

					shotgun.moveTo(player.x + 15, player.y + 25);
					shotgun.pushRight(playerData.push);
					shotgun.setImage("Images/shotgunRight.png");
				} else if(playerData.gun == "winchester"){
			

					winchester.moveTo(player.x + 15, player.y + 25);
					winchester.pushRight(push);
					winchester.setImage("Images/winchesterRight.png");
				}//end of which gun is being used

			}//end of if gavegun is true 


			
		

	});//end of right key keydown function

	sjs.keyDown(A_KEY, function(){
		

		if(playerData.gun == "longGun"){
			firstGun.hide();
			shotgun.hide();
			winchester.hide();
		} else if(playerData.gun == "shotgun"){
			firstGun.hide();
			longGun.hide();
			winchester.hide();
		} else if(playerData.gun == "winchester"){
			firstGun.hide();
			longGun.hide();
			shotgun.hide();
		}//end of hiding guns that aren't being used


			facingRight = false;
			player.pushLeft(playerData.push);

			player.setImage("Images/faceLeftNoGun.png");

			if(playerData.onHorse == true){
				horse.setImage("Images/horseL.png");
				horse.moveTo(player.x - pixels, player.y - pixels / 4);
			}//end of if on horse and facing left

			if(playerData.gaveGun == true){
				if(playerData.gun == "firstGun"){
					firstGun.moveTo(player.x , player.y + pixels / 80 * 25);
					firstGun.pushLeft(playerData.push);
					firstGun.setImage("Images/firstGunLeft.png")
				} else if (playerData.gun == "longGun"){
					firstGun.destroy();

					longGun.moveTo(player.x - 10, player.y + 25);
					longGun.pushLeft(playerData.push);
					longGun.setImage("Images/longGunLeft.png")
				}else if(playerData.gun == "shotgun"){
					firstGun.destroy();
					longGun.destroy();

					shotgun.moveTo(player.x + 15, player.y + 25);
					shotgun.pushLeft(playerData.push);
					shotgun.setImage("Images/shotgunLeft.png");
				} else if(playerData.gun == "winchester"){
				

					winchester.moveTo(player.x - 10 , player.y + 25);
					winchester.pushLeft(push);
					winchester.setImage("Images/winchesterLeft.png");
				}//end of which gun is being used

			}//end of if gavegun is true 
			
		
		
	});//end of left key keydown function
	

	sjs.keyDown(W_KEY, function(){

		if(playerData.gun == "longGun"){
			firstGun.hide();
			shotgun.hide();
			winchester.hide();
		} else if(playerData.gun == "shotgun"){
			firstGun.hide();
			longGun.hide();
			winchester.hide();
		} else if(playerData.gun == "winchester"){
			firstGun.hide();
			longGun.hide();
			shotgun.hide();
		}//end of hiding guns that aren't being used

		
			facingUp = true;
			player.pushUp(playerData.push);
			
				if(playerData.gaveGun == true){
					if(facingRight == true){

						if(playerData.onHorse == true){
							horse.moveTo(player.x - pixels / 2, player.y - pixels / 4);
							horse.setImage("Images/horseR.png");

						}//end of if facing right is true

						if(playerData.gun == "firstGun"){
							firstGun.moveTo(player.x + pixels / 80 * 40, player.y + pixels / 80 * 25);
							firstGun.pushRight(playerData.push);
							firstGun.setImage("Images/firstGunRight.png");
						} else if(playerData.gun == "longGun"){
							firstGun.destroy();

							longGun.moveTo(player.x + 50, player.y + 25);
							longGun.pushRight(playerData.push);
							longGun.setImage("Images/longGunRight.png")
						}else if(playerData.gun == "shotgun"){
							firstGun.destroy();
							longGun.destroy();

							shotgun.moveTo(player.x + 15, player.y + 25);
							shotgun.pushRight(playerData.push);
							shotgun.setImage("Images/shotgunRight.png");
						} else if(playerData.gun == "winchester"){
			

							winchester.moveTo(player.x + 15, player.y + 25);
							winchester.pushRight(push);
							winchester.setImage("Images/winchesterRight.png");
						}//end of which gun is being used

					} else{

						if(playerData.onHorse == true){
							horse.setImage("Images/horseL.png");
							horse.moveTo(player.x - pixels, player.y - pixels / 4);
						}//end of if on horse and facing left

						if(playerData.gun == "firstGun"){
							firstGun.moveTo(player.x , player.y + pixels / 80 * 25);
							firstGun.pushLeft(playerData.push);
							firstGun.setImage("Images/firstGunLeft.png")
						} else if (playerData.gun == "longGun"){
							firstGun.destroy();

							longGun.moveTo(player.x - 10, player.y + 25);
							longGun.pushLeft(playerData.push);
							longGun.setImage("Images/longGunLeft.png")
						}else if(playerData.gun == "shotgun"){
							firstGun.destroy();
							longGun.destroy();

							shotgun.moveTo(player.x + 15, player.y + 25);
							shotgun.pushLeft(playerData.push);
							shotgun.setImage("Images/shotgunLeft.png");
						} else if(playerData.gun == "winchester"){
				

							winchester.moveTo(player.x - 10 , player.y + 25);
							winchester.pushLeft(push);
							winchester.setImage("Images/winchesterLeft.png");
						}//end of which gun is being used

					}//end of if facing right or left

				}//end of if gavegun is true
			

		
		
	});//end of up keydown function

	sjs.keyDown(S_KEY, function(){


		if(playerData.gun == "longGun"){
			firstGun.hide();
			shotgun.hide();
			winchester.hide();
		} else if(playerData.gun == "shotgun"){
			firstGun.hide();
			longGun.hide();
			winchester.hide();
		} else if(playerData.gun == "winchester"){
			firstGun.hide();
			longGun.hide();
			shotgun.hide();
		}//end of hiding guns that aren't being used

		
			facingUp = false;
			player.pushDown(playerData.push);

			if(playerData.gaveGun == true){
				if(facingRight == true){

					if(playerData.onHorse == true){
						horse.moveTo(player.x - pixels / 2, player.y - pixels / 4);
						horse.setImage("Images/horseR.png");

					}//end of if facing right is true


					if(playerData.gun == "firstGun"){
						firstGun.moveTo(player.x + pixels / 80 * 40, player.y + pixels / 80 * 25);
						firstGun.pushRight(playerData.push);
						firstGun.setImage("Images/firstGunRight.png");
					} else if(playerData.gun == "longGun"){
						longGun.moveTo(player.x + 50, player.y + 25);
						longGun.pushRight(playerData.push);
						longGun.setImage("Images/longGunRight.png")
					}else if(playerData.gun == "shotgun"){
						firstGun.destroy();
						longGun.destroy();

						shotgun.moveTo(player.x + 15, player.y + 25);
						shotgun.pushRight(playerData.push);
						shotgun.setImage("Images/shotgunRight.png");
					} else if(playerData.gun == "winchester"){
			

						winchester.moveTo(player.x + 15, player.y + 25);
						winchester.pushRight(push);
						winchester.setImage("Images/winchesterRight.png");
					}//end of which gun is being used
					
				} else{

					if(playerData.onHorse == true){
						horse.setImage("Images/horseL.png");
						horse.moveTo(player.x - pixels, player.y - pixels / 4);
					}//end of if on horse and facing left

					if(playerData.gun == "firstGun"){
						firstGun.moveTo(player.x , player.y + pixels / 80 * 25);
						firstGun.pushLeft(playerData.push);
						firstGun.setImage("Images/firstGunLeft.png")
					} else if (playerData.gun == "longGun"){
						longGun.moveTo(player.x - 10, player.y + 25);
						longGun.pushLeft(playerData.push);
						longGun.setImage("Images/longGunLeft.png")
					}else if(playerData.gun == "shotgun"){
						firstGun.destroy();
						longGun.destroy();

						shotgun.moveTo(player.x + 15, player.y + 25);
						shotgun.pushLeft(playerData.push);
						shotgun.setImage("Images/shotgunLeft.png");
					} else if(playerData.gun == "winchester"){
				

						winchester.moveTo(player.x - 10 , player.y + 25);
						winchester.pushLeft(push);
						winchester.setImage("Images/winchesterLeft.png");
					}//end of which gun is being used

				}//end of if facing right or left

			}//end of if gavegun is true
			
		
		
	});//end of down keydown function


	//*** PLAYER ENDS ***











	//old man code and properties
	var oldMan = new sjs.Image("Images/oldMan.png");
	oldMan.type = "oldMan";
	oldMan.setSize(pixels, pixels);
	oldMan.moveTo(16 * pixels, 10 * pixels );
	oldMan.friction = 1;

	var oMTreasure = new sjs.Image("Images/treasure.png");
	oMTreasure.type = "oldManTreasure";
	oMTreasure.setSize(20, 20);
	oMTreasure.moveTo( (17 * pixels) + 20, (2 * pixels) + 40);

	var textBox = new sjs.Image("Images/textBox.png");
	textBox.type = "textBox";
	textBox.setSize(pixels * 2.5, pixels);
	textBox.moveTo(oldMan.getX() + 70, oldMan.getY() );
	
	if(playerData.defeatGEnemy == undefined || playerData.defeatGEnemy == false){
		var oldManText = new sjs.Text("Help Me!", pixels * 0.15, "black");
		oldManText.moveTo(textBox.getX() + pixels / 4, textBox.getY() + pixels / 8);
		var oldManText2 = new sjs.Text("", pixels * 0.15, "black");
		oldManText2.moveTo(textBox.getX() + pixels / 4, textBox.getY() + pixels * 0.3125);
	}// end of if defeated G enemy == false then create old first Man text

	if(playerData.defeatGEnemy == true){
		var oldManText = new sjs.Text("Come Talk To Me.", pixels * 0.15, "black");
		oldManText.moveTo(textBox.getX() + pixels / 4, textBox.getY() + pixels / 8);
		var oldManText2 = new sjs.Text(" ", pixels * 0.15, "black");
		oldManText2.moveTo(textBox.getX() + pixels / 4, textBox.getY() + pixels * 0.3125);
	}// end of if defeated G enemy == false then create old first Man text

	
	var textNumber = 0;
	var textNumber2 = 0;
	var canContinue = true;
	var canContinue2 = true;
	var touchedOldMan = false;

	sjs.keyDown(SPACE_KEY, function(){
		if((playerData["defeatGEnemy"] == false) || (playerData["defeatGEnemy"] == undefined) ){
			if(touchedOldMan == true){
				if(canContinue == true){
					textNumber += 1;
					canContinue = false;
					setTimeout(function(){
						canContinue = true;
					},500)
				}//end of if canContinue == true
				
		
				if(textNumber == 1){
					oldManText.setText("A Bandit Took My Money ):):");
				
				}else if(textNumber == 2){
					oldManText.setText("He Ran Off Towards ")
					oldManText2.setText("The Top Fence")

				}else if(textNumber == 3){
					oldManText.setText("If You Run Into Him ");
					oldManText2.setText("You'll Fight!")
				}else if(textNumber == 4){
					oldManText.setText("Here If You Help Me You ");
					oldManText2.setText("Can Keep This Gun.")

					if(playerData["gaveGun"] == false){
						playerData["gaveGun"] = true;
						firstGun.show();
						firstGun.moveTo(player.x + pixels / 0.625, player.y + pixels / 0.3125);
						firstGun.setSize(pixels / 3, pixels / 3);
						

					}//end of if gaveGun == false then set it to true and give the gun
				}else if (textNumber >= 5){
					oldManText.setText("Now Hurry Before He Gets Away!");
					oldManText2.setText("")
					textNumber = 5;
				}//end of else if statement for which text to display


			}//end of if touched old man is true

		}//end of if defeated g enemy is false or undefined
		if(playerData.defeatGEnemy == true){
			if(touchedOldMan == true){
				if(canContinue2 == true){
					textNumber2 += 1;
					canContinue2 = false;
					setTimeout(function(){
						canContinue2 = true;
					},500)
				}//end of if canContinue == true
					


					if(textNumber2 == 1){
						oldManText.setText("Thanks For Helping!");
					} else if(textNumber2 == 2){
						oldManText.setText("If You Noticed, You Now Have Gold!")
						oldManText2.setText("Check On It In The Top Left Corner.")
					} else if(textNumber2 == 3){
						oldManText.setText("Every Time You Defeat An Enemy,")
						oldManText2.setText("You Get A Certain Amoun Of Gold.")
					} else if(textNumber2 == 4){
						oldManText.setText("If I were you I'd Go To The Store And")
						oldManText2.setText("Check Out The Stuff You Can Buy...")
						
					} else if(textNumber2 == 5){
						oldManText.setText("It's About 2 Miles East Of Here.")
						oldManText2.setText("But Be Carefull!");

					} else if(textNumber2 == 6){
						oldManText.setText("The Further You Stray From Home The")
						oldManText2.setText("Harder The Bandits Will Be To Defeat.");
					} else if(textNumber2 == 7){
						oldManText.setText("Go Talk To Big Joe At The Shop. He Can");
						oldManText2.setText("Tell You More About This Place.")
						
					} else if(textNumber2 >= 8){
						oldManText.setText("Good Luck My Friend!");
						oldManText2.setText("");
					}//end of setting old man text based on textnumber2

			}//end of if touched Old man == true

		}//end of if defeatedGEnemy == true
		


	});//end of e keydown function






	var greenEnemy = new sjs.Image("Images/greenEnemy.png");
	greenEnemy.type = "greenEnemy";
	greenEnemy.setSize(pixels, pixels);
	greenEnemy.moveTo(17 * pixels, 2 * pixels);
	greenEnemy.friction = 1;
	greenEnemy.noBounds = true;

	var greenEnemyLives = 2;

	var greenEnemyHealthBar = new sjs.Image("Images/healthBar.png");
	greenEnemyHealthBar.type = "healthBar"
	greenEnemyHealthBar.setSize(greenEnemyLives * 50, 10)
	greenEnemyHealthBar.follow(greenEnemy);
	greenEnemyHealthBar.moveTo(greenEnemy.getX() - 20, greenEnemy.getY() - 20);
	greenEnemyHealthBar.node.style.zIndex = 1;





	var fence1 = new sjs.Image("Images/fence.png");
	fence1.setSize(pixels, pixels);
	fence1.moveTo(20 * pixels, 6 * pixels)
	fence1.type = "fence";
	var fence2 = new sjs.Image("Images/fence.png");
	fence2.setSize(pixels, pixels);
	fence2.moveTo(20 * pixels, 7 * pixels)
	fence2.type = "fence";




	if(playerData.defeatGEnemy == true) {
		player.moveTo(playerData.x, playerData.y);
		oldMan.moveTo(15 * pixels, 2 * pixels);
		oMTreasure.moveTo(15 * pixels, 2 * pixels);

		textBox.moveTo(oldMan.getX() + pixels, oldMan.getY() - pixels);
		oldManText.moveTo(textBox.getX() + 20, textBox.getY() + 10);
		oldManText2.moveTo(textBox.getX() + 20, textBox.getY() + 25);
		
		

		fence1.destroy();
		fence2.destroy();

		greenEnemy.destroy();
		greenEnemyHealthBar.destroy();

	}//end of if defeatGEnemy == true 



	if(playerData.defeatGEnemy == undefined){
		playerData.gaveGun = false;
	}else if(playerData.defeatGEnemy == true){
		playerData.gaveGun = true;
		
		firstGun.show()
		firstGun.moveTo(player.x + pixels / 80 * 40, player.y + pixels / 80 * 25);
		
		
	}//end of if defeatGEnemy == undefined gave gun = false else gave gun gets true






	

	
		
	


	







	//*** onHit functions ***


	sjs.onHit("player", "fence", function(x, y){
		sjs.stoppedBy(x, y);
	});//end of onhit between player and fence


	sjs.onHit("player", "wall", function(x, y){
		sjs.stoppedBy(x, y);
	});//end of onhit function for walls and player

	
	sjs.onHit("player", "greenEnemy", function(x, y){
		playerData["lastLocation"] = "house";
		localStorage.setItem("playerProperties", JSON.stringify(playerProperties) );

		window.location = "fightGreen.html";

	});//end of onhit between green enemy and player
	

	sjs.onHit("player", "rock", function(x, y){
		sjs.stoppedBy(x, y);
	});//end of onhit between player and rock

		
	sjs.onHit("player", ["oldMan", "textBox"], function(x, y){
		if(playerData["gaveGun"] == false){
			sjs.stoppedBy(x, y);
			touchedOldMan = true;
		}//end of if gaveGun == false

		if(playerData.defeatGEnemy == true){
			sjs.stoppedBy(player, oldMan);
			touchedOldMan = true;
		}

		var spaceToContinue = new sjs.Text("Press SPACE To Talk", 10, "black");
		spaceToContinue.moveTo(oldManText.x, oldManText.y + pixels);

	});//end of onhit between player and oldMan

	sjs.onHit("player", "right_screen", function(){


		playerData["x"] = 10;
		playerData["y"] = pixels * 6 + 40;
		playerData["lastLocation"] = "house";
		localStorage.setItem("playerProperties", JSON.stringify(playerData) );

		window.location = "right1.html";
	});


	sjs.onHit("player", "table", function(x, y){
		sjs.stoppedBy(x, y);



		var tableText1 = new sjs.Text("Press E To Eat ", pixels / 8, "white");
		tableText1.moveTo(table.x,table.y - 15);

		var tableText2 = new sjs.Text("And Restore Health.", pixels / 8, "white");
		tableText2.moveTo(table.x, table.y );

		setTimeout(function(){
			tableText1.destroy();
			tableText2.destroy();
		},2000)

		sjs.keyDown(E_KEY, function(){
			setTimeout(function(){
				playerData.lives += 1
				healthBar.setSize(playerData.lives * pixels / 4, pixels / 8);

				

				if(playerData.lives >= 5){
					playerData.lives = 5;
					healthBar.setSize(playerData.lives * pixels / 4, pixels / 8);
				}//end of capping health at 5
				
			}, 2000);//end of interval function giving player health back
		});//end of E keydown function
	})//end of onhit between player and table




	var canMount = true;
	sjs.onHit("player", "horse", function(){
		sjs.keyDown(SPACE_KEY, function(){
			if(playerData.gotHorse == true){
				if(canMount == true){
					canMount = false;

					setTimeout(function(){
						canMount = true;
					},1000)
					if(playerData.onHorse == false || playerData.onHorse == undefined){
						playerData.onHorse = true;
						playerData.push = 4;
						
						if(facingRight == true){

							horse.setImage("Images/horseR.png");
							player.setImage("Images/faceRightNoGun.png");
							player.moveTo(horse.x + pixels / 2, horse.y + pixels / 4);

							horse.follow(player);

						} else{

							player.setImage("Images/faceLeftNoGun.png");
							horse.setImage("Images/horseL.png");
							player.moveTo(horse.x + pixels, horse.y + pixels / 4);

							horse.follow(player);

						}//end of which way your facing move to horse

					}else{

						horse.unfollow(player);
						playerData.offHorse = true;
						playerData.onHorse = false;
						playerData.push = 2;
						horse.unfollow(player);


					}//end of if you're on the horse or not

				}//end of if you can mount or not

			}//end of if you have the horse

		})//end of e keydown function

	})//end of onhit between player and horse















}//end start



</script>
</head>
<body onload="start()">
<h1></h1>
<div id="target" style="margin:auto;background:grey;"></div>
</body>
</html>